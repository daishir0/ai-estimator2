# GDPR準拠チェックリスト

**作成日**: 2025-10-22
**バージョン**: 1.0

---

## 概要

このチェックリストは、AI見積りシステムがGDPR（一般データ保護規則）に準拠しているかを確認するためのものです。

---

## 1. データ収集（Data Collection）

### 1.1 最小化原則（Data Minimization）

- [x] **必要最小限のデータのみ収集**: 見積り生成に必要なデータのみを収集
- [x] **不要なデータの収集を禁止**: 個人情報（氏名、住所、電話番号、メールアドレス）を収集しない
- [x] **トラッキングCookieを使用しない**: ユーザー行動の追跡、広告配信のためのCookieを使用しない

### 1.2 適法性（Lawfulness）

- [x] **同意取得**: サービス利用開始時にプライバシーポリシーへの同意を取得
- [x] **目的の明示**: データ利用目的を明示（見積り生成、サービス品質向上、エラー分析、システム監視）
- [x] **透明性**: データ収集・利用方針をプライバシーポリシーで明示

---

## 2. データ処理（Data Processing）

### 2.1 処理の適法性

- [x] **同意に基づく処理**: ユーザーの同意に基づいてデータを処理
- [x] **目的の範囲内での処理**: データ利用目的の範囲内で処理
- [x] **第三者提供の明示**: OpenAI APIへのデータ提供を明示

### 2.2 データ保護影響評価（DPIA）

- [x] **リスク評価**: データ処理に伴うリスクを評価
- [x] **PII対策**: PII検出・マスキング機能を実装
- [x] **セキュリティ対策**: HTTPS通信、APIキー管理、入力検証、ログ監視

---

## 3. データ保管（Data Storage）

### 3.1 保管期間

- [x] **保管期間の設定**: 見積りタスクデータは30日間、システムログは90日間、メトリクスは30日間
- [x] **自動削除の実装**: 保管期間経過後、自動的に削除（毎日深夜2時に実行）
- [x] **削除ログの記録**: 削除操作をログに記録

### 3.2 データセキュリティ

- [x] **暗号化通信**: HTTPS通信（本番環境）
- [x] **アクセス制御**: ファイルアクセス権限の適切な設定
- [x] **環境変数管理**: APIキーを環境変数（`.env`）で安全に管理
- [x] **PII検出・マスキング**: ログからの個人情報除外

---

## 4. ユーザー権利（User Rights）

### 4.1 アクセス権（Right to Access）

- [x] **実装済み**: `GET /api/v1/tasks/{task_id}` で自身のデータにアクセス可能
- [x] **プライバシー情報提供**: `GET /api/v1/tasks/{task_id}/privacy` でデータ保持期間、自動削除日を確認可能

### 4.2 削除権（Right to Erasure / Right to be Forgotten）

- [x] **実装済み**: `DELETE /api/v1/tasks/{task_id}` で自身のデータを削除可能
- [x] **完全削除**: タスク、成果物、質問・回答、見積り、チャットメッセージ、関連ファイルをすべて削除
- [x] **即時削除**: APIリクエスト後、即座に削除

### 4.3 ポータビリティ権（Right to Data Portability）

- [x] **実装済み**: `GET /api/v1/tasks/{task_id}/download` でExcel形式のデータをダウンロード可能
- [x] **構造化フォーマット**: Excel（.xlsx）形式で他のシステムへのインポートが可能

### 4.4 修正権（Right to Rectification）

- [x] **実装済み**: チャット調整機能で見積りデータを修正可能
- [x] **Excel再出力**: 修正後のデータをExcel形式で再出力可能

---

## 5. セキュリティ（Security）

### 5.1 通信セキュリティ

- [x] **HTTPS通信**: 本番環境ではHTTPSで通信を暗号化
- [x] **SSL証明書検証**: SSL証明書の有効性を確認

### 5.2 認証・認可

- [x] **APIキー管理**: OpenAI APIキーを環境変数で安全に管理
- [x] **アクセス制御**: ファイルアクセス権限の適切な設定

### 5.3 入力検証

- [x] **Guardrails実装**: プロンプトインジェクション対策、入力検証
- [x] **サニタイゼーション**: SQLインジェクション、コマンドインジェクション対策
- [x] **PII検出・マスキング**: ログからの個人情報除外

### 5.4 監視・可観測性

- [x] **構造化ログ**: JSON形式の構造化ログで監視
- [x] **メトリクス収集**: OpenAI APIの使用状況、レスポンスタイム、エラー率を収集
- [x] **アラート**: 異常検知時の自動アラート

---

## 6. 文書化（Documentation）

### 6.1 プライバシーポリシー

- [x] **作成完了**: `docs/privacy/PRIVACY_POLICY.ja.md`（日本語）
- [x] **作成完了**: `docs/privacy/PRIVACY_POLICY.en.md`（英語）
- [x] **バージョン管理**: バージョン番号、発効日、改訂履歴を記載

### 6.2 GDPRチェックリスト

- [x] **作成完了**: `docs/privacy/GDPR_CHECKLIST.ja.md`（日本語）
- [x] **作成完了**: `docs/privacy/GDPR_CHECKLIST.en.md`（英語）

### 6.3 技術ドキュメント

- [x] **自動削除バッチ**: `docs/systemd/README.md`
- [x] **API仕様**: `DELETE /api/v1/tasks/{task_id}`, `GET /api/v1/tasks/{task_id}/privacy`

---

## 7. 第三者提供（Third-Party Data Sharing）

### 7.1 OpenAI API

- [x] **提供目的の明示**: 見積り生成、質問生成、調整提案の生成
- [x] **提供データの明示**: 成果物名称、説明、システム要件、質問回答
- [x] **PII対策**: PII検出・マスキング機能により、個人情報を自動的に除外
- [x] **データ保持ポリシーの明示**: OpenAIのデータ使用ポリシーに準拠

### 7.2 その他の第三者

- [x] **データ提供なし**: データを第三者に提供することはありません

---

## 8. インシデント対応（Incident Response）

### 8.1 データ漏洩対応

- [ ] **インシデント対応手順の策定**: データ漏洩時の対応手順を策定（TODO）
- [ ] **通知プロセスの確立**: データ漏洩時の通知プロセスを確立（TODO）
- [x] **ログ監視**: 異常なアクセスを検知する仕組みを実装

### 8.2 バックアップ・復旧

- [ ] **バックアップ体制の確立**: データベースのバックアップ体制を確立（TODO）
- [ ] **復旧手順の策定**: データ復旧手順を策定（TODO）

---

## 9. 定期レビュー（Periodic Review）

### 9.1 プライバシーポリシーのレビュー

- [ ] **定期レビュー（年1回）**: プライバシーポリシーを年1回レビュー（TODO）
- [ ] **法令変更対応**: 法令変更時にポリシーを更新（TODO）

### 9.2 セキュリティレビュー

- [ ] **定期レビュー（年1回）**: セキュリティ対策を年1回レビュー（TODO）
- [ ] **脆弱性対応**: 脆弱性発見時に即座に対応（TODO）

---

## 10. 改善点（Improvement Areas）

### 現時点での課題

1. **インシデント対応手順の策定**: データ漏洩時の対応手順を策定する必要がある
2. **バックアップ体制の確立**: データベースのバックアップ体制を確立する必要がある
3. **定期レビュー体制の確立**: プライバシーポリシー・セキュリティ対策の定期レビュー体制を確立する必要がある

### 今後の対応

- **TODO-9（コスト管理・レート制限）**: OpenAI APIのコスト管理、レート制限を実装
- **定期レビュー**: 年1回のプライバシーポリシー・セキュリティ対策のレビューを実施

---

## 11. 準拠状況サマリー

| カテゴリ | 準拠状況 | 備考 |
|---------|---------|------|
| **データ収集** | ✅ 準拠 | 最小化原則、適法性、透明性を満たす |
| **データ処理** | ✅ 準拠 | 同意に基づく処理、PII対策を実装 |
| **データ保管** | ✅ 準拠 | 保管期間設定、自動削除を実装 |
| **ユーザー権利** | ✅ 準拠 | アクセス権、削除権、ポータビリティ権を実装 |
| **セキュリティ** | ✅ 準拠 | HTTPS、APIキー管理、入力検証、監視を実装 |
| **文書化** | ✅ 準拠 | プライバシーポリシー、チェックリストを作成 |
| **第三者提供** | ✅ 準拠 | OpenAI APIの使用を明示、PII対策を実装 |
| **インシデント対応** | ⚠️ 一部未対応 | インシデント対応手順、バックアップ体制の策定が必要 |
| **定期レビュー** | ⚠️ 一部未対応 | 定期レビュー体制の確立が必要 |

---

**総合評価**: ✅ **GDPR準拠（基本要件を満たす）**

**今後の対応**: インシデント対応手順、バックアップ体制、定期レビュー体制の確立

---

**作成日**: 2025-10-22
**最終更新**: 2025-10-22
**担当**: Claude Code
**ステータス**: 完了

---

© 2025 AI Estimator System. All rights reserved.
